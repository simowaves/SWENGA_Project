<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>

<div th:replace="~{includes/bootstrap :: bootstrapMeta}" />
<title>WhatToFood - New Recipe</title>
<div th:replace="~{includes/bootstrap :: bootstrapCSS}" />

</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->
		<div th:replace="~{/includes/navigation :: sidebar}"></div>
		<!-- End of Sidebar -->

		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->

				<div th:replace="includes/navigation :: topbar"></div>

				<!-- End of Topbar -->

				<!-- #####  Begin Page Content ####### -->
				<div class="container-fluid">

					<!-- Page Heading -->
					<div
						class="d-sm-flex align-items-center justify-content-between mb-4">
						<h1 class="h3 mb-0 text-gray-800">Create new recipe</h1>

					</div>

					<!-- Content -->
					<div>

						<div class="row">
							<div class="col-md-4">
								<!-- TODO : fix picture sizing -->
								<div
									style="position: relative; overflow: hidden; padding-bottom: 100%;"
									class="mb-4">
									<a><img style="position: absolute; width: 100%"
										class="rounded"
										src="https://dummyimage.com/400x400/949494/e6e6e6&text=Your+Picture"
										alt=""></a>

									<!-- 										<img class="img-fluid card-img-top" -->
									<!-- 											style="position: absolute;" -->
									<!-- 											th:src="@{download(documentId=${recipe.document.id})}" -->
									<!-- 											alt=""> -->
								</div>
								<div class="input-group mb-3">
									<div class="custom-file">
										<input type="file" class="custom-file-input"
											id="inputGroupFile" name="uploadPicture"> <label
											class="custom-file-label" for="inputGroupFile01">Upload
											tasty picture</label>
									</div>
								</div>
							</div>
							<div class="col-md-8">
								<form class="needs-validation" novalidate
									th:action="@{/createNewRecipe}" method="post">
									<div class="form-row">
										<div class="col-md-4 mb-3">
											<label for="validationCustom01">Title</label> <input
												type="text" class="form-control" id="validationCustom01"
												name="title" placeholder="Title" value="" required>
											<div class="valid-feedback">Looks good!</div>
										</div>
									</div>

									<!-- Select Ingredient -->
									<div class="form-row">
										<div class="col-md-12">

											<!-- expanding Ingredient selection -->
											<div class="form-group multiple-form-group" data-max=6>
												<label>Add Ingredients (with data-max=6)</label>
												<div class="form-group input-group">
													<input type="text" name="amount" class="form-control"
														placeholder="amount" required>

													<!-- th:field="*{ingredients}" -->
													<select class="form-control ml-2" name="ingredient"
														required>
														<option selected value="">Select your ingredient</option>
														<option th:each="ingredient : ${ingredients}"
															th:text="${ingredient.name}" th:value="${ingredient.id}"></option>
													</select><span class="input-group-btn ml-2"><button
															type="button" class="btn btn-success btn-circle btn-add">
															<i class="fas fa-plus"></i>
														</button></span>
												</div>
											</div>
										</div>
									</div>


									<div class="form-row">
										<div class="col-md-12 mb-3">
											<label for="validationCustom03">Description</label>
											<textarea class="form-control" rows="4"
												id="validationCustom03" name="description"
												placeholder="Enter your recipe here ..." required></textarea>
											<div class="invalid-feedback">The description must not
												be empty!</div>
										</div>
									</div>
									<div>
										<label for="validationCustom03">Add Ingredients (with
											data-max=6)</label>
										<div>
											<!-- expanding Ingredient selection -->
											<div class="form-group multiple-form-group" data-max=10>
												<div class="form-group input-group">
													<select class="form-control" name="category" required>
														<option selected value="">Select your category</option>
														<option th:each="category : ${categories}"
															th:text="${category.title}" th:value="${category.id}"></option>
													</select><span class="input-group-btn ml-2"><button
															type="button" class="btn btn-success btn-circle btn-add">
															<i class="fas fa-plus"></i>
														</button></span>
												</div>
											</div>




										</div>

									</div>
									<div class="form-group">
										<div class="form-check">
											<input class="form-check-input" type="radio" name="publish"
												id="publishpublic" value="option2" checked><i
												class="fas fa-paper-plane"></i> <label
												class="form-check-label" for="exampleRadios2">
												Publish recipe for everyone </label>
										</div>
										<div class="form-check">
											<input class="form-check-input" type="radio" name="publish"
												id="publishprivate" value="option1"> <i
												class="fas fa-lock "></i> <label class="form-check-label"
												for="exampleRadios1">Keep recipe private </label>
										</div>


										<div class="form-check"></div>
									</div>
									<button class="btn btn-primary" type="submit">Create
										Recipe</button>
								</form>




							</div>
						</div>
					</div>



					<div class="card-deck"></div>
				</div>
				<!-- /.container-fluid -->

			</div>
			<!-- End of Main Content -->

			<!-- Footer -->
			<footer class="sticky-footer bg-white">
				<div class="container my-auto">
					<div class="copyright text-center my-auto">
						<span>Copyright &copy; Your Website 2019</span>
					</div>
				</div>
			</footer>
			<!-- End of Footer -->

		</div>
		<!-- End of Content Wrapper -->

	</div>
	<!-- End of Page Wrapper -->

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>

	<!-- Logout Modal-->
	<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
					<button class="close" type="button" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">Ã—</span>
					</button>
				</div>
				<div class="modal-body">Select "Logout" below if you are ready
					to end your current session.</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button"
						data-dismiss="modal">Cancel</button>
					<a class="btn btn-primary" href="login.html">Logout</a>
				</div>
			</div>
		</div>
	</div>

	<!-- JS needs to move to bottom -->
	<div th:replace="~{includes/bootstrap :: bootstrapJS}" />

	<script>
		// Example starter JavaScript for disabling form submissions if there are invalid fields
		(function() {
			'use strict';
			window.addEventListener('load',
					function() {
						// Fetch all the forms we want to apply custom Bootstrap validation styles to
						var forms = document
								.getElementsByClassName('needs-validation');
						// Loop over them and prevent submission
						var validation = Array.prototype.filter.call(forms,
								function(form) {
									form.addEventListener('submit', function(
											event) {
										if (form.checkValidity() === false) {
											event.preventDefault();
											event.stopPropagation();
										}
										form.classList.add('was-validated');
									}, false);
								});
					}, false);
		})();
	</script>

	<!-- Expanding Form script -->
	<script type="text/javascript">
		(function($) {
			$(function() {

				var addFormGroup = function(event) {
					event.preventDefault();

					var $formGroup = $(this).closest('.form-group');
					var $multipleFormGroup = $formGroup
							.closest('.multiple-form-group');
					var $formGroupClone = $formGroup.clone();

					$(this).toggleClass(
							'btn-default btn-add btn-danger btn-remove').html(
							'<i class="fas fa-trash"></i>');

					$formGroupClone.find('input').val('');
					$formGroupClone.insertAfter($formGroup);

					var $lastFormGroupLast = $multipleFormGroup
							.find('.form-group:last');
					if ($multipleFormGroup.data('max') <= countFormGroup($multipleFormGroup)) {
						$lastFormGroupLast.find('.btn-add').attr('disabled',
								true);
					}
				};

				var removeFormGroup = function(event) {
					event.preventDefault();

					var $formGroup = $(this).closest('.form-group');
					var $multipleFormGroup = $formGroup
							.closest('.multiple-form-group');

					var $lastFormGroupLast = $multipleFormGroup
							.find('.form-group:last');
					if ($multipleFormGroup.data('max') >= countFormGroup($multipleFormGroup)) {
						$lastFormGroupLast.find('.btn-add').attr('disabled',
								false);
					}

					$formGroup.remove();
				};

				var countFormGroup = function($form) {
					return $form.find('.form-group').length;
				};

				$(document).on('click', '.btn-add', addFormGroup);
				$(document).on('click', '.btn-remove', removeFormGroup);

			});
		})(jQuery);
	</script>

</body>

</html>
